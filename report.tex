% 0 for single page, 1 for book:
\def\mode{0}

\if 0\mode
  \documentclass[b5paper]{report}
\else
  \documentclass[b5paper, twoside, openright]{report}
\fi

\usepackage{fancyhdr}
\usepackage[tmargin=27mm, bmargin=30mm]{geometry}
% \usepackage[a4,center,frame]{crop}

\usepackage{caption}
\usepackage{csquotes}
\usepackage{microtype}
\usepackage{booktabs}
\usepackage{color}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage{svg}
\usepackage{float}
\usepackage{url}
\usepackage{parskip}
\usepackage[hidelinks]{hyperref}
\usepackage[utf8]{inputenc}

%% Syntax highlighting:
\usepackage[chapter]{minted}

%% Chapter header:
\usepackage[Lenny]{fncychap}

%% Font:
\usepackage[libertine]{newtxmath}
\usepackage{libertineRoman}
\usepackage{biolinum}
\usepackage{titlesec}
\titleformat*{\subsubsection}{\large\bfseries}

\fancyhf{}
\cfoot{\thepage}

\if 0\mode
  \fancyhead[LO,LE]{\textsc{\leftmark}}
\else
  \fancyhead[LE]{\textsc{\leftmark}}
  \fancyhead[RO]{\textsc{\rightmark}}
\fi

\graphicspath{{images/}}
\svgpath{{images/}}
\usetikzlibrary{positioning}
\usetikzlibrary{shapes,decorations,shadows}

% Prevent LaTeX from stretching pages out:
\raggedbottom

% BibLaTeX for bibliography
\usepackage[
  backend=bibtex,
  style=numeric,
  minalphanames=3,
  isbn=false,
  sortcites=true,
  sorting=anyt,
  abbreviate=false,
  giveninits=true,
  url=false,
  doi=false,
  maxnames=9]{biblatex}
\setlength\bibitemsep{5pt}
\addbibresource{sources.bib}

\definecolor{LinkColor}{HTML}{1C4883}
% Potential colors:
% SICP red: #80171F
\hypersetup{
  pdfauthor={Lars Martin Bævre Ek},
  pdftitle={Durability in a data-flow storage system},
  colorlinks=true,
  linkcolor=LinkColor,
  urlcolor=LinkColor,
  citecolor=LinkColor,
}

\author{Lars Martin Bævre Ek}
\title{Durability in a data-flow storage system}

% Title page and project description
\def\professor{Kjetil Nørvåg, IDI}

\newcommand{\titlefont}{\fontfamily{lmss}\fontsize{2.3em}{0em}\selectfont}
\newcommand{\authorfont}{\fontfamily{lmss}\fontsize{1.6em}{0em}\selectfont\bfseries}
\newcommand{\frontpagefont}{\fontfamily{lmss}\fontsize{1.15em}{1.3em}\selectfont}
\newcommand{\newlinetitle}{\par\noindent }
\newcommand*{\frontpage}{%
  \renewcommand{\arraystretch}{1}
  \thispagestyle{empty}
  \begingroup
    \vbox{%
      \vspace*{-1cm}
      {\noindent\includegraphics[width=6cm]{ntnu}\par}\vspace{3cm}
      {\noindent\titlefont{Durability in a data-flow storage system}\par}\vspace{.8cm}
      {\noindent\authorfont{Lars Martin Bævre Ek}\par}
    }%
    \vfill
    \vbox{%
      \frontpagefont
      {\noindent%
        \begin{tabbing}
         Master of Science in Computer Science \\
         Submission date: \= June 2018 \\
         Supervisor: \> \professor \\
       \end{tabbing}\par
      }\vspace{.8cm}
      {\noindent Norwegian University of Science and Technology\\Department of
      Computer Science}
    }%
    \null
  \endgroup%
  \cleardoublepage%
  \renewcommand{\arraystretch}{1.2}
}%


\begin{document}

\input{macros}

\if 0\mode
  \frontpage
\fi

\renewcommand{\thepage}{\roman{page}}

\setcounter{page}{1}

\input{abstract}
\input{norwegian-abstract}
\input{preface}

\tableofcontents
\clearpage\setcounter{page}{1}
\renewcommand{\thepage}{\arabic{page}}

\ChNameVar{\fontsize{14}{16}\usefont{OT1}{cmr}{m}{n}\selectfont}
\ChNumVar{\fontsize{60}{62}\usefont{OT1}{qpl}{m}{n}\selectfont}
\ChTitleVar{\Huge\bfseries\rm}
\ChRuleWidth{1pt}

\pagestyle{fancy}

\input{introduction}
\input{background}
\input{related-work}
\input{benchmarks}
\input{persistent-bases}
\input{recovery}
\input{evaluation}
\input{conclusion}

\appendix
\input{contributions}

\printbibliography

\end{document}
